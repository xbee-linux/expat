schema-version: 1.0

type: builder


const:
  srcDir: /usr/src
  exportDir: /opt/expat


var:
  version: 2.4.1

provision:
  - url:
      from: https://github.com/libexpat/libexpat/releases/download/R_2_4_1/expat-{% version %}.tar.xz
      todir: "{% srcDir %}"

build:
  - shell:
      cmds:
        - ./configure --prefix={% exportDir %}
            --disable-static
            --docdir={% exportDir %}/share/doc/expat-{% version %}
        - make
#        - make check
        - make install
        - install -v -m644 doc/*.{html,png,css} {% exportDir %}/share/doc/expat-{% version %}
      directory: "{% srcDir %}/expat-{% version %}"
  - export: "{% exportDir %}"

